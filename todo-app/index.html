<!-- 使用说明 & 快捷键：N 新建；/ 搜索；Delete 删除；Ctrl+Z 撤销；双击条目可编辑；Enter 保存编辑；Esc 取消编辑。 -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>离线待办清单</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="app-header" role="banner">
    <div class="branding" tabindex="0">
      <h1>记得干活！！</h1>
      <span class="tagline">规划 · 打卡 · 管理</span>
    </div>
    <div class="search-area" role="search">
      <label class="sr-only" for="searchInput">搜索待办</label>
      <input id="searchInput" type="search" placeholder="搜索所有待办 /" aria-label="搜索待办" />
    </div>
    <div class="header-actions" role="group" aria-label="快速操作">
      <button id="undoBtn" class="ghost" aria-label="撤销上一次删除" title="撤销上一次删除 (Ctrl+Z)" disabled>
        撤销
      </button>
      <button id="trashBtn" class="icon-pill" aria-label="打开垃圾桶" title="垃圾桶">
        <img src="assets/icon-trash.svg" alt="" aria-hidden="true" />
        <span class="badge" id="trashCount">0</span>
      </button>
      <button id="exportBtn" class="ghost" aria-label="导出待办 JSON" title="导出 JSON">
        导出
      </button>
      <button id="importBtn" class="ghost" aria-label="导入待办 JSON" title="导入 JSON">
        导入
      </button>
      <input id="importFileInput" type="file" accept="application/json" hidden />
    </div>
  </header>

  <main class="app-main" role="main">
    <section class="new-todo-bar" aria-label="新增待办">
      <form id="newTodoForm">
        <label class="sr-only" for="newTodoInput">新增待办</label>
        <input id="newTodoInput" type="text" placeholder="输入待办事项..." aria-label="待办内容" required />
        <div class="new-todo-actions">
          <label class="toggle" tabindex="0" role="switch" aria-checked="false">
            <input type="checkbox" id="addToLongterm" />
            <span class="slider" aria-hidden="true"></span>
            <span class="toggle-label">加入长期栏</span>
          </label>
          <button type="submit" class="primary" aria-label="添加待办">
            <img src="assets/icon-add.svg" alt="" aria-hidden="true" />
            添加
          </button>
        </div>
      </form>
    </section>

    <div class="board" role="region" aria-label="待办面板">
      <section class="column" data-section="inProgress" aria-labelledby="inProgressTitle">
        <header class="column-header">
          <h2 id="inProgressTitle">进行中</h2>
          <span class="badge" id="inProgressCount">0</span>
        </header>
        <div class="empty-state" data-section="inProgress">🎯 今天的目标是什么？开始添加吧。</div>
        <ul class="todo-list" id="inProgressList" aria-label="进行中待办列表"></ul>
      </section>

      <section class="column" data-section="done" aria-labelledby="doneTitle">
        <header class="column-header">
          <h2 id="doneTitle">已完成</h2>
          <span class="badge" id="doneCount">0</span>
        </header>
        <div class="empty-state" data-section="done">✨ 完成会带来满足感，加油！</div>
        <ul class="todo-list" id="doneList" aria-label="已完成待办列表"></ul>
      </section>

      <section class="column" data-section="longterm" aria-labelledby="longtermTitle">
        <header class="column-header">
          <h2 id="longtermTitle">长期</h2>
          <span class="badge" id="longtermCount">0</span>
        </header>
        <div class="empty-state" data-section="longterm">🌱 积少成多，让习惯开花。</div>
        <ul class="todo-list" id="longtermList" aria-label="长期待办列表"></ul>
      </section>
    </div>
  </main>

  <div id="trashPanel" class="trash-panel" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="trashPanelTitle" tabindex="-1">
    <div class="trash-content">
      <header class="trash-header">
        <h2 id="trashPanelTitle">垃圾桶</h2>
        <button id="trashCloseBtn" class="ghost" aria-label="关闭垃圾桶" title="关闭">×</button>
      </header>
      <div class="trash-body">
        <div class="empty-state" data-section="trash">🗑️ 垃圾桶是空的。</div>
        <ul class="trash-list" id="trashList" aria-label="垃圾桶列表"></ul>
      </div>
      <footer class="trash-footer">
        <button id="clearTrashBtn" class="ghost" aria-label="清空垃圾桶" title="清空垃圾桶">清空垃圾桶</button>
      </footer>
    </div>
  </div>

  <template id="todoItemTemplate">
    <li class="todo-item" tabindex="0">
      <label class="checkbox" aria-label="标记状态">
        <input type="checkbox" />
        <span class="checkmark" aria-hidden="true"></span>
      </label>
      <div class="item-body">
        <div class="item-content" role="textbox" aria-readonly="true"></div>
        <span class="longterm-status" aria-hidden="true"></span>
      </div>
      <span class="timestamp-dot" tabindex="0" aria-label="待办时间信息"></span>
      <button class="delete-btn ghost" aria-label="删除" title="删除">×</button>
    </li>
  </template>

  <template id="trashItemTemplate">
    <li class="trash-item" tabindex="0">
      <div class="trash-info">
        <p class="trash-text"></p>
        <p class="trash-meta"></p>
      </div>
      <div class="trash-actions">
        <button class="restore-btn ghost" aria-label="还原" title="还原">
          <img src="assets/icon-restore.svg" alt="" aria-hidden="true" />
          还原
        </button>
        <button class="delete-btn ghost" aria-label="彻底删除" title="彻底删除">
          <img src="assets/icon-trash.svg" alt="" aria-hidden="true" />
          删除
        </button>
      </div>
    </li>
  </template>

  <textarea id="importTextarea" class="modal-textarea" aria-label="导入 JSON 输入框" hidden></textarea>

  <script src="app.js"></script>
</body>
</html>
